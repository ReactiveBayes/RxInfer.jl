<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Session summary · RxInfer.jl</title><meta name="title" content="Session summary · RxInfer.jl"/><meta property="og:title" content="Session summary · RxInfer.jl"/><meta property="twitter:title" content="Session summary · RxInfer.jl"/><meta name="description" content="Julia package for automated Bayesian inference on a factor graph with reactive message passing"/><meta property="og:description" content="Julia package for automated Bayesian inference on a factor graph with reactive message passing"/><meta property="twitter:description" content="Julia package for automated Bayesian inference on a factor graph with reactive message passing"/><meta property="og:url" content="https://reactivebayes.github.io/RxInfer.jl/manuals/session_summary/"/><meta property="twitter:url" content="https://reactivebayes.github.io/RxInfer.jl/manuals/session_summary/"/><link rel="canonical" href="https://reactivebayes.github.io/RxInfer.jl/manuals/session_summary/"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-X4PH160GMF"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-X4PH160GMF', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/theme.css" rel="stylesheet" type="text/css"/><link href="../../assets/header.css" rel="stylesheet" type="text/css"/><script src="../../assets/header.js"></script><script src="../../assets/chat.js"></script><meta name="keywords" content="Julia, Bayesian inference, factor graph, message passing, probabilistic programming, reactive programming, RxInfer">
<link rel="sitemap" type="application/xml" title="Sitemap" href="https://reactivebayes.github.io/RxInfer.jl/stable/sitemap.xml"></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="RxInfer.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="RxInfer.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">RxInfer.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">User guide</span><ul><li><a class="tocitem" href="../getting-started/">Getting started</a></li><li><a class="tocitem" href="../comparison/">RxInfer.jl vs. Others</a></li><li><a class="tocitem" href="../model-specification/">Model specification</a></li><li><a class="tocitem" href="../constraints-specification/">Constraints specification</a></li><li><a class="tocitem" href="../meta-specification/">Meta specification</a></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">Inference specification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../inference/overview/">Overview</a></li><li><a class="tocitem" href="../inference/static/">Static inference</a></li><li><a class="tocitem" href="../inference/streamlined/">Streamline inference</a></li><li><a class="tocitem" href="../inference/initialization/">Initialization</a></li><li><a class="tocitem" href="../inference/autoupdates/">Auto-updates</a></li><li><a class="tocitem" href="../inference/delta-node/">Deterministic nodes</a></li><li><a class="tocitem" href="../inference/nonconjugate/">Non-conjugate inference</a></li><li><a class="tocitem" href="../inference/undefinedrules/">Undefined message update rules</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">Inference customization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../customization/custom-node/">Defining a custom node and rules</a></li><li><a class="tocitem" href="../customization/postprocess/">Inference results postprocessing</a></li></ul></li><li><a class="tocitem" href="../debugging/">Debugging</a></li><li class="is-active"><a class="tocitem" href>Session summary</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Basic-Usage"><span>Basic Usage</span></a></li><li><a class="tocitem" href="#Session-Capacity"><span>Session Capacity</span></a></li><li><a class="tocitem" href="#Custom-sessions"><span>Custom sessions</span></a></li><li><a class="tocitem" href="#Session-Reset"><span>Session Reset</span></a></li><li><a class="tocitem" href="#Session-Statistics"><span>Session Statistics</span></a></li><li><a class="tocitem" href="#Session-Structure"><span>Session Structure</span></a></li><li><a class="tocitem" href="#Accessing-Session-Data"><span>Accessing Session Data</span></a></li><li><a class="tocitem" href="#session-configuration"><span>Configuration</span></a></li><li><a class="tocitem" href="#Best-Practices"><span>Best Practices</span></a></li><li><a class="tocitem" href="#Session-Summary"><span>Session Summary</span></a></li><li><a class="tocitem" href="#Programmatic-Access"><span>Programmatic Access</span></a></li><li><a class="tocitem" href="#Benchmarking-Considerations"><span>Benchmarking Considerations</span></a></li><li class="toplevel"><a class="tocitem" href="#Developers-Reference"><span>Developers Reference</span></a></li></ul></li><li><a class="tocitem" href="../telemetry/">Sharing sessions &amp; telemetry</a></li><li><a class="tocitem" href="../migration-guide-v2-v3/">Migration from v2 to v3</a></li><li><input class="collapse-toggle" id="menuitem-2-12" type="checkbox"/><label class="tocitem" for="menuitem-2-12"><span class="docs-label">Sharp bits of RxInfer</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../sharpbits/overview/">Overview</a></li><li><a class="tocitem" href="../sharpbits/rule-not-found/">Rule Not Found Error</a></li><li><a class="tocitem" href="../sharpbits/stack-overflow-inference/">Stack Overflow in Message Computations</a></li><li><a class="tocitem" href="../sharpbits/usage-colon-equality/">Using <code>=</code> instead of <code>:=</code> for deterministic nodes</a></li></ul></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/model-construction/">Model construction</a></li><li><a class="tocitem" href="../../library/bethe-free-energy/">Bethe Free Energy</a></li><li><a class="tocitem" href="../../library/functional-forms/">Functional form constraints</a></li><li><a class="tocitem" href="../../library/exported-methods/">Exported methods</a></li></ul></li><li><a class="tocitem" href="../../examples/overview/">Examples</a></li><li><span class="tocitem">Contributing</span><ul><li><a class="tocitem" href="../../contributing/guide/">Contribution guide</a></li><li><a class="tocitem" href="../../contributing/guidelines/">Contribution guidelines</a></li><li><a class="tocitem" href="../../contributing/new-documentation/">Contributing to the documentation</a></li><li><a class="tocitem" href="../../contributing/new-example/">Contributing to the examples</a></li><li><a class="tocitem" href="../../contributing/new-release/">Publishing a new release</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User guide</a></li><li class="is-active"><a href>Session summary</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Session summary</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ReactiveBayes/RxInfer.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/main/docs/src/manuals/session_summary.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="manual-session-summary"><a class="docs-heading-anchor" href="#manual-session-summary">Session Summary</a><a id="manual-session-summary-1"></a><a class="docs-heading-anchor-permalink" href="#manual-session-summary" title="Permalink"></a></h1><p>RxInfer provides a built-in session logging system that helps track and analyze various aspects of RxInfer usages. This feature is particularly useful for debugging, performance monitoring, and understanding the behavior of your inference models.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Sessions are <strong>not</strong> shared and are intended for your personal use. However, you can opt-in to share your session data with the RxInfer team. See <a href="../telemetry/#manual-usage-telemetry">RxInfer Usage Telemetry</a> for more details.</p></div></div><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>Session logging in RxInfer automatically captures and maintains statistics for:</p><ul><li>Model source code and metadata</li><li>Input data characteristics</li><li>Execution timing and success rates</li><li>Error information (if any)</li><li>Environment information (Julia version, OS, etc.)</li><li>Context keys used across invocations</li></ul><h2 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h2><p>By default, RxInfer creates and maintains a global session that logs all inference invocations:</p><pre><code class="language-julia hljs">using RxInfer

# Define a simple model
@model function simple_model(y)
    x ~ Normal(mean = 0.0, var = 1.0)
    y ~ Normal(mean = x, var = 1.0)
end

# Run inference with default session logging
result = infer(
    model = simple_model(),
    data = (y = 1.0,)
)

# Access the current session
session = RxInfer.default_session()

# Get statistics for inference invocations
stats = RxInfer.get_session_stats(session, :inference)
println(&quot;Number of invokes: $(stats.total_invokes)&quot;)
println(&quot;Success rate: $(round(stats.success_rate * 100, digits=1))%&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Number of invokes: 58
Success rate: 98.3%</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The number of logged invocations may be different from the number of invocations in the example above since the session is created and logged at the start of the documentation build.</p></div></div><h2 id="Session-Capacity"><a class="docs-heading-anchor" href="#Session-Capacity">Session Capacity</a><a id="Session-Capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Session-Capacity" title="Permalink"></a></h2><p>By default, RxInfer maintains a fixed-size history of the invocations.  When this limit is exceeded, the oldest invocations are automatically dropped. This prevents  memory growth while maintaining recent history. </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.DEFAULT_SESSION_STATS_CAPACITY" href="#RxInfer.DEFAULT_SESSION_STATS_CAPACITY"><code>RxInfer.DEFAULT_SESSION_STATS_CAPACITY</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DEFAULT_SESSION_STATS_CAPACITY</code></pre><p>The default capacity for the circular buffer storing session invocations. This value determines how many past invocations are stored for each label&#39;s statistics. Can be modified at compile time using preferences:</p><pre><code class="language-julia hljs">using RxInfer
set_session_stats_capacity!(100)</code></pre><p>The change requires a Julia session restart to take effect. Default value is <code>1000</code>. Must be a positive integer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L60-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.set_session_stats_capacity!" href="#RxInfer.set_session_stats_capacity!"><code>RxInfer.set_session_stats_capacity!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_session_stats_capacity!(capacity::Int)</code></pre><p>Set the default capacity for session statistics at compile time. The change requires a Julia session restart to take effect.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L77-L81">source</a></section></article><p>This is particularly useful when:</p><ul><li>Running benchmarks that might generate many invocations</li><li>Working with long-running applications</li><li>Managing memory usage in resource-constrained environments</li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Changing the session stats capacity requires a Julia session restart to take effect. The change is persistent across Julia sessions until explicitly changed again.</p></div></div><h2 id="Custom-sessions"><a class="docs-heading-anchor" href="#Custom-sessions">Custom sessions</a><a id="Custom-sessions-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-sessions" title="Permalink"></a></h2><p>You can also pass custom sessions to the <code>infer</code> function:</p><pre><code class="language-julia hljs">using RxInfer

@model function simple_model(y)
    x ~ Normal(mean = 0.0, var = 1.0)
    y ~ Normal(mean = x, var = 1.0)
end

# Create a custom session
session = RxInfer.create_session()

# Run inference with custom session
result = infer(
    model = simple_model(),
    data = (y = 1.0,),
    session = session
)

println(&quot;Session ID: $(session.id)&quot;)
println(&quot;Created at: $(session.created_at)&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Session ID: 3c16516f-db22-47d8-b003-acb59374fa81
Created at: 2025-02-19T14:21:44.246</code></pre><p>or pass <code>nothing</code> to disable session logging:</p><pre><code class="language-julia hljs">result = infer(
    model = simple_model(),
    data = (y = 1.0,),
    session = nothing # skips session logging for this invocation
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Inference results:
  Posteriors       | available for (x)
</code></pre><p>See <a href="#session-configuration">Configuration</a> for more details on how to manage sessions.</p><h2 id="Session-Reset"><a class="docs-heading-anchor" href="#Session-Reset">Session Reset</a><a id="Session-Reset-1"></a><a class="docs-heading-anchor-permalink" href="#Session-Reset" title="Permalink"></a></h2><p>You can reset the session to its initial state with <a href="#RxInfer.reset_session!"><code>RxInfer.reset_session!</code></a> function:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.reset_session!" href="#RxInfer.reset_session!"><code>RxInfer.reset_session!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reset_session!(session, [ labels ])</code></pre><p>Removes gathered statistics from the session. Optionally accepts a vector of labels to delete. If no labels specified deletes everything.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L145-L150">source</a></section></article><h2 id="Session-Statistics"><a class="docs-heading-anchor" href="#Session-Statistics">Session Statistics</a><a id="Session-Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Session-Statistics" title="Permalink"></a></h2><p>RxInfer maintains detailed statistics for each label in a session. Currently, only the <code>:inference</code> label is actively used, which collects information about inference invocations.</p><h3 id="What&#39;s-being-collected"><a class="docs-heading-anchor" href="#What&#39;s-being-collected">What&#39;s being collected</a><a id="What&#39;s-being-collected-1"></a><a class="docs-heading-anchor-permalink" href="#What&#39;s-being-collected" title="Permalink"></a></h3><p>For the <code>:inference</code> label, each invocation records:</p><ul><li><strong>Basic Information</strong>:<ul><li>Unique identifier (UUID)</li><li>Status (<code>:success</code> or <code>:error</code>)</li><li>Execution start and end timestamps</li></ul></li><li><strong>Model Information</strong>:<ul><li>Model source code (via <code>GraphPPL.getsource</code>)</li><li>Model name (via <code>GraphPPL.getmodel</code>)</li><li>Model constraints (if specified)</li><li>Model meta information (if specified)</li><li>Model autoupdates specification (if specified)</li><li>Model initialization specification (if specified)</li></ul></li><li><strong>Data Information</strong>:<ul><li>Input data characteristics (names, types, sizes) - <strong>no actual data is collected</strong>`</li><li>Datastream type (for streaming inference)</li><li>Return variables structure</li><li>Predict variables structure (for batch inference)</li><li>History variables structure (for streaming inference)</li><li>History buffer size (if specified)</li></ul></li><li><strong>Inference Parameters</strong>:<ul><li>Number of iterations</li><li>Free energy computation flag</li><li>Node contraction settings</li><li>Progress display settings</li><li>Exception catching settings</li></ul></li><li><strong>Additional Settings</strong>:<ul><li>Callbacks configuration</li><li>Addons configuration</li><li>Options configuration</li></ul></li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>No actual data is collected for the <code>:inference</code> label. Only metadata such as size and type is recorded.</p></div></div><h4 id="An-example-of-a-last-infer-call-in-the-session"><a class="docs-heading-anchor" href="#An-example-of-a-last-infer-call-in-the-session">An example of a last infer call in the session</a><a id="An-example-of-a-last-infer-call-in-the-session-1"></a><a class="docs-heading-anchor-permalink" href="#An-example-of-a-last-infer-call-in-the-session" title="Permalink"></a></h4><p>The documentation build for <code>RxInfer</code> executes real code and maintains its own session. Let&#39;s look at an example of a last infer call in the session:</p><pre><code class="language-julia hljs">using RxInfer

session = RxInfer.default_session()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Session(id=83c37e4f-b02c-4a16-b575-d4f5cc782ddc, labels=[inference])</code></pre><pre><code class="language-julia hljs">stats = RxInfer.get_session_stats(session, :inference)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SessionStats(id=777b1f98-d825-4d18-a64e-8457198ffa03, label=:inference, total=58, success_rate=98.3%, invokes=58/1000)</code></pre><pre><code class="language-julia hljs">last_invoke = stats.invokes[end]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SessionInvoke(id=ab938877-cc28-413c-ab69-d2efb2fb73e3, status=success, duration=214.0ms, context_keys=[free_energy, allow_node_contraction, returnvars, showprogress, addons, options, data, model_name, predictvars, historyvars, callbacks, model, catch_exception, iterations])</code></pre><pre><code class="language-julia hljs">last_invoke.context</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Symbol, Any} with 14 entries:
  :free_energy            =&gt; false
  :allow_node_contraction =&gt; false
  :returnvars             =&gt; &quot;Nothing&quot;
  :showprogress           =&gt; false
  :addons                 =&gt; &quot;Nothing&quot;
  :options                =&gt; &quot;Nothing&quot;
  :data                   =&gt; InferenceLoggedDataEntry[data: y (type=Float64, si…
  :model_name             =&gt; &quot;simple_model&quot;
  :predictvars            =&gt; &quot;Nothing&quot;
  :historyvars            =&gt; &quot;Nothing&quot;
  :callbacks              =&gt; &quot;Nothing&quot;
  :model                  =&gt; &quot;function simple_model(y)\n    x ~ Normal(mean = 0…
  :catch_exception        =&gt; false
  :iterations             =&gt; nothing</code></pre><h3 id="Aggregated-statistics"><a class="docs-heading-anchor" href="#Aggregated-statistics">Aggregated statistics</a><a id="Aggregated-statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Aggregated-statistics" title="Permalink"></a></h3><p>These individual invocations are then aggregated into real-time statistics:</p><ul><li>Total number of invocations and success/failure counts</li><li>Success rate (fraction of successful invokes)</li><li>Execution timing statistics (min, max, total duration)</li><li>Set of all context keys used across invocations</li><li>Fixed-size history of recent invocations (controlled by <code>DEFAULT_SESSION_STATS_CAPACITY</code>)</li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.SessionStats" href="#RxInfer.SessionStats"><code>RxInfer.SessionStats</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SessionStats</code></pre><p>Statistics for a specific label in a session.</p><p><strong>Fields</strong></p><ul><li><code>id::UUID</code>: Unique identifier for these statistics</li><li><code>label::Symbol</code>: The label these statistics are for</li><li><code>total_invokes::Int</code>: Total number of invokes with this label</li><li><code>success_count::Int</code>: Number of successful invokes</li><li><code>failed_count::Int</code>: Number of failed invokes</li><li><code>success_rate::Float64</code>: Fraction of successful invokes (between 0 and 1)</li><li><code>min_duration_ms::Float64</code>: Minimum execution duration in milliseconds</li><li><code>max_duration_ms::Float64</code>: Maximum execution duration in milliseconds</li><li><code>total_duration_ms::Float64</code>: Total execution duration for mean calculation</li><li><code>context_keys::Set{Symbol}</code>: Set of all context keys used across invokes</li><li><code>invokes::CircularBuffer{SessionInvoke}</code>: A series of invokes attached to the statistics</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L28-L45">source</a></section></article><p>You can access these statistics using <code>get_session_stats</code>:</p><pre><code class="language-julia hljs">using RxInfer

session = RxInfer.default_session()
stats = RxInfer.get_session_stats(session, :inference)

println(&quot;Total invokes: $(stats.total_invokes)&quot;)
println(&quot;Success rate: $(round(stats.success_rate * 100, digits=1))%&quot;)
println(&quot;Failed invokes: $(stats.failed_count)&quot;)
println(&quot;Mean duration (ms): $(stats.total_invokes &gt; 0 ? round(stats.total_duration_ms / stats.total_invokes, digits=2) : 0.0)&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Total invokes: 58
Success rate: 98.3%
Failed invokes: 1
Mean duration (ms): 1672.79</code></pre><h2 id="Session-Structure"><a class="docs-heading-anchor" href="#Session-Structure">Session Structure</a><a id="Session-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Session-Structure" title="Permalink"></a></h2><p>A session consists of the following components:</p><h3 id="Session-Fields"><a class="docs-heading-anchor" href="#Session-Fields">Session Fields</a><a id="Session-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Session-Fields" title="Permalink"></a></h3><ul><li><code>id::UUID</code>: Unique identifier for the session</li><li><code>created_at::DateTime</code>: Session creation timestamp</li><li><code>environment::Dict{Symbol, Any}</code>: System and environment information</li><li><code>stats::Dict{Symbol, SessionStats}</code>: Statistics per label</li><li><code>semaphore::Base.Semaphore</code>: Thread-safe semaphore for concurrent updates</li></ul><h3 id="Environment-Information"><a class="docs-heading-anchor" href="#Environment-Information">Environment Information</a><a id="Environment-Information-1"></a><a class="docs-heading-anchor-permalink" href="#Environment-Information" title="Permalink"></a></h3><p>The session automatically captures system information including:</p><ul><li>Julia version</li><li>RxInfer version</li><li>Operating system</li><li>Machine architecture</li><li>CPU threads</li><li>System word size</li></ul><h3 id="Statistics-Information"><a class="docs-heading-anchor" href="#Statistics-Information">Statistics Information</a><a id="Statistics-Information-1"></a><a class="docs-heading-anchor-permalink" href="#Statistics-Information" title="Permalink"></a></h3><p>Each label&#39;s statistics (<code>SessionStats</code>) captures:</p><ul><li><code>id::UUID</code>: Unique identifier for these statistics</li><li><code>label::Symbol</code>: The label these statistics are for</li><li><code>total_invokes::Int</code>: Total number of invokes</li><li><code>success_count::Int</code>: Number of successful invokes</li><li><code>failed_count::Int</code>: Number of failed invokes</li><li><code>success_rate::Float64</code>: Fraction of successful invokes</li><li><code>min_duration_ms::Float64</code>: Minimum execution duration</li><li><code>max_duration_ms::Float64</code>: Maximum execution duration</li><li><code>total_duration_ms::Float64</code>: Total execution duration</li><li><code>context_keys::Set{Symbol}</code>: Set of all context keys used</li><li><code>invokes::CircularBuffer{SessionInvoke}</code>: Recent invocations history</li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.SessionInvoke" href="#RxInfer.SessionInvoke"><code>RxInfer.SessionInvoke</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SessionInvoke</code></pre><p>Represents a single invocation of an inference operation.</p><p><strong>Fields</strong></p><ul><li><code>id::UUID</code>: Unique identifier for this invocation</li><li><code>status::Symbol</code>: Status of the invocation (e.g. :success, :failure)</li><li><code>execution_start::DateTime</code>: When the invocation started</li><li><code>execution_end::DateTime</code>: When the invocation completed</li><li><code>context::Dict{Symbol, Any}</code>: Additional contextual information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L8-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.create_invoke" href="#RxInfer.create_invoke"><code>RxInfer.create_invoke</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_invoke()</code></pre><p>Create a new session invoke with status set to <code>:unknown</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L165-L169">source</a></section></article><h2 id="Accessing-Session-Data"><a class="docs-heading-anchor" href="#Accessing-Session-Data">Accessing Session Data</a><a id="Accessing-Session-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-Session-Data" title="Permalink"></a></h2><p>You can inspect session data to analyze inference behavior:</p><pre><code class="language-julia hljs">using RxInfer

@model function simple_model(y)
    x ~ Normal(mean = 0.0, var = 1.0)
    y ~ Normal(mean = x, var = 1.0)
end

session = RxInfer.create_session()
result = infer(model = simple_model(), data = (y = 1.0,), session = session)

# Get inference statistics
stats = RxInfer.get_session_stats(session, :inference)

# Get the latest invoke
latest_invoke = stats.invokes[end]

# Check invocation status
println(&quot;Status: $(latest_invoke.status)&quot;)

# Calculate execution duration
duration = latest_invoke.execution_end - latest_invoke.execution_start
println(&quot;Duration: $duration&quot;)

# Access model source
println(&quot;Model name: $(latest_invoke.context[:model_name])&quot;)
println(&quot;Model source: $(latest_invoke.context[:model])&quot;)

# Examine data properties
for entry in latest_invoke.context[:data]
    println(&quot;\nData variable: $(entry.name)&quot;)
    println(&quot;Type: $(entry.type)&quot;)
    println(&quot;Size: $(entry.size)&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Status: success
Duration: 223 milliseconds
Model name: simple_model
Model source: function simple_model(y)
    x ~ Normal(mean = 0.0, var = 1.0)
    y ~ Normal(mean = x, var = 1.0)
end

Data variable: y
Type: Float64
Size: ()</code></pre><h2 id="session-configuration"><a class="docs-heading-anchor" href="#session-configuration">Configuration</a><a id="session-configuration-1"></a><a class="docs-heading-anchor-permalink" href="#session-configuration" title="Permalink"></a></h2><h3 id="Default-Session"><a class="docs-heading-anchor" href="#Default-Session">Default Session</a><a id="Default-Session-1"></a><a class="docs-heading-anchor-permalink" href="#Default-Session" title="Permalink"></a></h3><p>The default session is created automatically when RxInfer is first imported. It is used for logging all inference invocations by default.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.default_session" href="#RxInfer.default_session"><code>RxInfer.default_session</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default_session()::Union{Nothing, Session}</code></pre><p>Get the current default session. If no session exists, returns <code>nothing</code>.</p><p><strong>Returns</strong></p><ul><li><code>Union{Nothing, Session}</code>: The current default session or <code>nothing</code> if logging is disabled</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L292-L299">source</a></section></article><h3 id="Enabling/Disabling-Logging"><a class="docs-heading-anchor" href="#Enabling/Disabling-Logging">Enabling/Disabling Logging</a><a id="Enabling/Disabling-Logging-1"></a><a class="docs-heading-anchor-permalink" href="#Enabling/Disabling-Logging" title="Permalink"></a></h3><p>Session logging can be enabled or disabled globally</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.disable_session_logging!" href="#RxInfer.disable_session_logging!"><code>RxInfer.disable_session_logging!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Disables session logging for RxInfer globally at compile time and saves it in package preferences. Has effect after Julia restart.</p><p>Restart Julia and verify it by <code>isnothing(RxInfer.default_session())</code>. </p><p>Note that session logging still can be enabled manually for the current session if <code>set_default_session!</code> is called manually with appropriate <code>Session</code> object. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L321-L327">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.enable_session_logging!" href="#RxInfer.enable_session_logging!"><code>RxInfer.enable_session_logging!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Enables session logging for RxInfer globally at compile time and saves it in package preferences. Has effect after Julia restart.</p><p>Restart Julia and verify it by <code>!isnothing(RxInfer.default_session())</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L333-L337">source</a></section></article><h3 id="Managing-Sessions"><a class="docs-heading-anchor" href="#Managing-Sessions">Managing Sessions</a><a id="Managing-Sessions-1"></a><a class="docs-heading-anchor-permalink" href="#Managing-Sessions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.create_session" href="#RxInfer.create_session"><code>RxInfer.create_session</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_session()</code></pre><p>Create a new session with a unique identifier, environment info and current timestamp. The session maintains separate statistics for each label, with each label&#39;s statistics having its own circular buffer of invokes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L120-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.set_default_session!" href="#RxInfer.set_default_session!"><code>RxInfer.set_default_session!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_default_session!(session::Union{Nothing, Session})</code></pre><p>Set the default session to a new session or disable logging by passing <code>nothing</code>. </p><p><strong>Arguments</strong></p><ul><li><code>session::Union{Nothing, Session}</code>: The new session to set as default, or <code>nothing</code> to disable logging</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L306-L313">source</a></section></article><h2 id="Best-Practices"><a class="docs-heading-anchor" href="#Best-Practices">Best Practices</a><a id="Best-Practices-1"></a><a class="docs-heading-anchor-permalink" href="#Best-Practices" title="Permalink"></a></h2><p><strong>Error Handling</strong>: Session logging automatically captures errors, making it easier to debug issues:</p><pre><code class="language-julia hljs">using RxInfer

@model function problematic_model(y)
    x ~ Normal(mean = 0.0, var = sqrt(-1.0)) # Invalid variance
    y ~ Normal(mean = x, var = 1.0)
end

try
    result = infer(model = problematic_model(), data = (y = 1.0,))
catch e
    # Check the latest invoke for error details
    stats = RxInfer.get_session_stats(RxInfer.default_session(), :inference)
    latest_invoke = stats.invokes[end]
    println(&quot;Status: $(latest_invoke.status)&quot;)
    println(&quot;Error: $(latest_invoke.context[:error])&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Status: error
Error: DomainError(-1.0, &quot;sqrt was called with a negative real argument but will only return a complex result if called with a complex argument. Try sqrt(Complex(x)).&quot;)</code></pre><p><strong>Performance Monitoring</strong>: Use session statistics to monitor inference performance:</p><pre><code class="language-julia hljs">using RxInfer, Statistics

@model function simple_model(y)
    x ~ Normal(mean = 0.0, var = 1.0)
    y ~ Normal(mean = x, var = 1.0)
end

session = RxInfer.create_session()

# Run multiple inferences
for i in 1:5
    infer(model = simple_model(), data = (y = randn(),), session = session)
end

stats = RxInfer.get_session_stats(session, :inference)
println(&quot;Mean duration (ms): $(round(stats.total_duration_ms / stats.total_invokes, digits=2))&quot;)
println(&quot;Success rate: $(round(stats.success_rate * 100, digits=1))%&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Mean duration (ms): 43.4
Success rate: 100.0%</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The first invocation is typically slower due to Julia&#39;s JIT compilation.</p></div></div><p><strong>Data Validation</strong>: Session logging helps track data characteristics:</p><pre><code class="language-julia hljs">using RxInfer

@model function simple_model(y)
    x ~ Normal(mean = 0.0, var = 1.0)
    y ~ Normal(mean = x, var = 1.0)
end

session = RxInfer.create_session()
result = infer(model = simple_model(), data = (y = 1.0,), session = session)

stats = RxInfer.get_session_stats(session, :inference)
latest_invoke = stats.invokes[end]

# Check data properties
for entry in latest_invoke.context[:data]
    println(&quot;Variable: $(entry.name)&quot;)
    println(&quot;Type: $(entry.type)&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Variable: y
Type: Float64</code></pre><h2 id="Session-Summary"><a class="docs-heading-anchor" href="#Session-Summary">Session Summary</a><a id="Session-Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Session-Summary" title="Permalink"></a></h2><p>You can view a tabular summary of these statistics at any time to understand how your inference tasks are performing:</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Session statistics below are collected during the documentation build.</p></div></div><p>The main function for viewing session statistics is <code>summarize_session</code>:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.summarize_session" href="#RxInfer.summarize_session"><code>RxInfer.summarize_session</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">summarize_session([io::IO], session::Session, label::Symbol = :inference; n_last = 5)</code></pre><p>Print a concise summary of session statistics for invokes with the specified label. The default label is <code>:inference</code> which gathers statistics of the <code>infer</code> function calls.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L343-L348">source</a></section></article><pre><code class="language-julia hljs">RxInfer.summarize_session(; n_last = 25)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">
Session Summary (label: inference)
Total invokes: 59
Session invokes limit: 1000
Success rate: 96.6%
Failed invokes: 2
Average execution time 1644.44ms (min: 0.0ms, max: 20066.0ms)
Context keys: free_energy, allow_node_contraction, returnvars, showprogress, initialization, addons, options, error, data, model_name, predictvars, historyvars, callbacks, datastream_type, meta, model, catch_exception, constraints, iterations, keephistory, autoupdates

Inference specific:
  Unique models: 20

Last 25 invokes, use `n_last` keyword argument to see more or less.
*  Note that benchmarking with `BenchmarkTools` or similar will pollute the session with test invokes.
   It is advised to explicitly pass `session = nothing` when benchmarking code involving the `infer` function.

Legend:
  ✓ - Present/Success   ✗ - Absent/Failure   ⚠ - Error
╭─────────────┬────────┬───────────┬───────────────────────┬──────┬──────┬──────┬──────┬───────╮
│          ID │ Status │  Duration │                 Model │ Cstr │ Meta │ Init │ Data │ Error │
├─────────────┼────────┼───────────┼───────────────────────┼──────┼──────┼──────┼──────┼───────┤
│ 5ac2f2b2... │      ✗ │     0.0ms │     problematic_model │    ✗ │    ✗ │    ✗ │    y │     ⚠ │
│ ab938877... │      ✓ │   214.0ms │          simple_model │    ✗ │    ✗ │    ✗ │    y │       │
│ e6818dfd... │      ✓ │  1873.0ms │                 Model │    ✗ │    ✗ │    ✗ │ data │       │
│ 52005818... │      ✓ │  1502.0ms │                 Model │    ✗ │    ✗ │    ✗ │ data │       │
│ f6423298... │      ✓ │   214.0ms │            test_model │    ✗ │    ✗ │    ✗ │    y │       │
│ 4e3ef8b7... │      ✓ │   368.0ms │            test_model │    ✗ │    ✗ │    ✗ │    y │       │
│ c1a01514... │      ✓ │   740.0ms │             coin_toss │    ✗ │    ✗ │    ✗ │    y │       │
│ df8fb55a... │      ✓ │   565.0ms │        gaussian_model │    ✗ │    ✓ │    ✗ │    y │       │
│ 0bd42cc4... │      ✓ │   963.0ms │        gaussian_model │    ✗ │    ✗ │    ✗ │    y │       │
│ f48b641e... │      ✓ │ 20066.0ms │               mymodel │    ✓ │    ✗ │    ✓ │    y │       │
│ dbe5786a... │      ✓ │  4166.0ms │          simple_model │    ✓ │    ✗ │    ✗ │    y │       │
│ 67ed8ad4... │      ✓ │   229.0ms │ beta_bernoulli_online │    ✗ │    ✗ │    ✓ │    y │       │
│ 496d2799... │      ✓ │   368.0ms │ beta_bernoulli_online │    ✗ │    ✗ │    ✓ │  N/A │       │
│ f16686ac... │      ✓ │    83.0ms │ beta_bernoulli_online │    ✗ │    ✗ │    ✓ │  N/A │       │
│ 78543125... │      ✓ │  1255.0ms │            iid_normal │    ✓ │    ✗ │    ✓ │  N/A │       │
│ 6d83d127... │      ✓ │  1024.0ms │ beta_bernoulli_online │    ✗ │    ✗ │    ✓ │  N/A │       │
│ 36165996... │      ✓ │   364.0ms │ beta_bernoulli_online │    ✗ │    ✗ │    ✓ │  N/A │       │
│ d1d24474... │      ✓ │   542.0ms │ beta_bernoulli_online │    ✗ │    ✗ │    ✓ │  N/A │       │
│ de283404... │      ✓ │   556.0ms │        iid_estimation │    ✓ │    ✗ │    ✓ │    y │       │
│ fcd6765b... │      ✓ │    37.0ms │        iid_estimation │    ✓ │    ✗ │    ✓ │    y │       │
│ 3d3b15ad... │      ✓ │  1407.0ms │        iid_estimation │    ✓ │    ✗ │    ✓ │    y │       │
│ fb69e123... │      ✓ │   154.0ms │        iid_estimation │    ✓ │    ✗ │    ✓ │    y │       │
│ 2233d0a4... │      ✓ │   908.0ms │        iid_estimation │    ✓ │    ✗ │    ✓ │    y │       │
│ fa9ddef9... │      ✗ │     0.0ms │        iid_estimation │    ✗ │    ✗ │    ✗ │    y │     ⚠ │
│ 604411cc... │      ✓ │   155.0ms │        beta_bernoulli │    ✗ │    ✗ │    ✗ │    y │       │
╰─────────────┴────────┴───────────┴───────────────────────┴──────┴──────┴──────┴──────┴───────╯

Tip: Share this session with `RxInfer.share_session_data()` to help improve RxInfer
     and get better support when reporting issues.</code></pre><p>The summary includes:</p><ul><li>Total number of inference invocations and success rate</li><li>Execution time statistics (mean, min, max)</li><li>List of context keys present</li><li>Number of unique models used</li><li>Table of most recent invocations showing:<ul><li>Status (success/failed)</li><li>Duration in milliseconds</li><li>Model name</li><li>Data variables used</li></ul></li></ul><h2 id="Programmatic-Access"><a class="docs-heading-anchor" href="#Programmatic-Access">Programmatic Access</a><a id="Programmatic-Access-1"></a><a class="docs-heading-anchor-permalink" href="#Programmatic-Access" title="Permalink"></a></h2><p>If you need to access the statistics programmatically, use <code>get_session_stats</code>:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.get_session_stats" href="#RxInfer.get_session_stats"><code>RxInfer.get_session_stats</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_session_stats(session::Session, label::Symbol = :inference)</code></pre><p>Get statistics for invokes with the specified label. If the label doesn&#39;t exist in the session, returns a new empty <code>SessionStats</code> instance.</p><p><strong>Arguments</strong></p><ul><li><code>session::Union{Nothing, Session}</code>: The session to get statistics from, or nothing</li><li><code>label::Symbol</code>: The label to get statistics for, defaults to :inference</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L387-L397">source</a></section></article><pre><code class="language-julia hljs">session = RxInfer.default_session()
stats = RxInfer.get_session_stats(session, :inference)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SessionStats(id=777b1f98-d825-4d18-a64e-8457198ffa03, label=:inference, total=59, success_rate=96.6%, invokes=59/1000)</code></pre><h2 id="Benchmarking-Considerations"><a class="docs-heading-anchor" href="#Benchmarking-Considerations">Benchmarking Considerations</a><a id="Benchmarking-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Benchmarking-Considerations" title="Permalink"></a></h2><p>When benchmarking code that involves the <code>infer</code> function, it&#39;s important to be aware of session logging behavior:</p><h3 id="Why-Disable-Session-Logging-During-Benchmarking?"><a class="docs-heading-anchor" href="#Why-Disable-Session-Logging-During-Benchmarking?">Why Disable Session Logging During Benchmarking?</a><a id="Why-Disable-Session-Logging-During-Benchmarking?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-Disable-Session-Logging-During-Benchmarking?" title="Permalink"></a></h3><ol><li><p><strong>Multiple Executions</strong>: Benchmarking tools like <code>BenchmarkTools.jl</code> execute the code multiple times to gather accurate performance metrics. Each execution is logged as a separate invoke in the session, which can quickly fill up the session buffer.</p></li><li><p><strong>Session Pollution</strong>: These benchmark runs can pollute your session history with test invocations, making it harder to track and analyze your actual inference calls.</p></li><li><p><strong>Performance Impact</strong>: While minimal, session logging does add some overhead to each <code>infer</code> call, which could affect benchmark results.</p></li></ol><h3 id="Best-Practices-2"><a class="docs-heading-anchor" href="#Best-Practices-2">Best Practices</a><a class="docs-heading-anchor-permalink" href="#Best-Practices-2" title="Permalink"></a></h3><p>To get accurate benchmarking results and maintain a clean session history:</p><pre><code class="language-julia hljs"># DON&#39;T: This will fill your session with benchmark invocations
@benchmark infer(model = my_model, data = my_data)

# DO: Explicitly disable session logging during benchmarking
@benchmark infer(model = my_model, data = my_data, session = nothing)</code></pre><p>You can also temporarily disable session logging globally:</p><pre><code class="language-julia hljs"># Disable session logging
previous_session = RxInfer.default_session()
RxInfer.set_default_session!(nothing)
# Run your benchmarks
# ...
# Re-enable session logging reusing the previous session
RxInfer.set_default_session!(previous_session)</code></pre><p>or disable it explicitly:</p><pre><code class="language-julia hljs">RxInfer.disable_session_logging!() # works after Julia restart</code></pre><h1 id="Developers-Reference"><a class="docs-heading-anchor" href="#Developers-Reference">Developers Reference</a><a id="Developers-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Developers-Reference" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.Session" href="#RxInfer.Session"><code>RxInfer.Session</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Session</code></pre><p>A structure that maintains a log of RxInfer usage. Each session has a unique identifier and saves when it was created together with its environment.  The session maintains a dictionary of labeled statistics, each tracking a series of invocations (<code>SessionInvoke</code>)  and computing real-time statistics.</p><p><strong>Fields</strong></p><ul><li><code>id::UUID</code>: A unique identifier for the session</li><li><code>created_at::DateTime</code>: Timestamp when the session was created</li><li><code>environment::Dict{Symbol, Any}</code>: Information about the Julia &amp; RxInfer versions and system when the session was created</li><li><code>semaphore::Base.Semaphore</code>: Thread-safe semaphore for updating stats</li><li><code>stats::Dict{Symbol, SessionStats}</code>: Statistics per label</li></ul><p>The session logging is transparent and only collects non-sensitive information about calls. Users can inspect the session at any time using <code>get_current_session()</code> and reset it using <code>reset_session!()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L94-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.with_session" href="#RxInfer.with_session"><code>RxInfer.with_session</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">with_session(f::F, session, label::Symbol = :unknown) where {F}</code></pre><p>Execute function <code>f</code> within a session context with the specified label. If <code>session</code> is provided, logs execution details including timing and errors, and updates the session statistics for the given label. If <code>session</code> is <code>nothing</code>, executes <code>f</code> without logging.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L240-L246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.append_invoke_context" href="#RxInfer.append_invoke_context"><code>RxInfer.append_invoke_context</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">append_invoke_context(f, invoke)</code></pre><p>Append context information to a session invoke. If <code>invoke</code> is a <code>SessionInvoke</code>, executes function <code>f</code> with the invoke&#39;s context. If <code>invoke</code> is <code>nothing</code>, does nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L269-L274">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.update_session!" href="#RxInfer.update_session!"><code>RxInfer.update_session!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_session!(session::Session, label::Symbol, invoke::SessionInvoke)</code></pre><p>Thread-safely update session statistics for a given label with a new invoke. Uses a semaphore to ensure thread safety when multiple threads try to update statistics simultaneously.</p><p><strong>Arguments</strong></p><ul><li><code>session::Session</code>: The session to update</li><li><code>label::Symbol</code>: Label for the invoke</li><li><code>invoke::SessionInvoke</code>: The invoke to add to statistics</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L206-L216">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RxInfer.update_stats!" href="#RxInfer.update_stats!"><code>RxInfer.update_stats!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_stats!(stats::SessionStats, invoke::SessionInvoke)</code></pre><p>Update session statistics with a new invoke.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/RxInfer.jl/blob/fafa06794b12ea002b07472e27e534d984c7797d/src/session.jl#L174-L178">source</a></section></article><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../debugging/">« Debugging</a><a class="docs-footer-nextpage" href="../telemetry/">Sharing sessions &amp; telemetry »</a><div class="flexbox-break"></div><p class="footer-message">Created in <a href="https://biaslab.github.io/">BIASlab</a>, maintained by <a href="https://github.com/ReactiveBayes">ReactiveBayes</a>, powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Wednesday 19 February 2025 14:22">Wednesday 19 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
